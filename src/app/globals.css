@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Design Tokens ──────────────────────────────────────────────────────── */
:root {
  --bg-0:        #060b18;
  --bg-1:        #0a1020;
  --bg-2:        #0f172a;
  --text-main:   #e2e8f8;
  --text-muted:  #8b96b8;
  --line:        rgba(148, 163, 220, 0.12);
  --glass:       rgba(10, 16, 32, 0.78);
  --glass-soft:  rgba(13, 20, 40, 0.60);

  /* Agent accent palette */
  --alex-start: #f59e0b;
  --alex-end:   #d97706;
  --sam-start:  #06b6d4;
  --sam-end:    #0891b2;
  --lyra-start: #8b5cf6;
  --lyra-end:   #7c3aed;
  --nova-start: #f43f5e;
  --nova-end:   #e11d48;
}

/* ── Reset ──────────────────────────────────────────────────────────────── */
*, *::before, *::after {
  box-sizing: border-box;
}

html, body {
  min-height: 100%;
}

body {
  margin: 0;
  color: var(--text-main);
  font-family: "Inter", "Sora", "Avenir Next", "Segoe UI", system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  background:
    radial-gradient(ellipse 60% 40% at 0% 0%, rgba(99, 102, 241, 0.14) 0%, transparent 55%),
    radial-gradient(ellipse 50% 35% at 100% 0%, rgba(6, 182, 212, 0.12) 0%, transparent 50%),
    linear-gradient(170deg, var(--bg-0) 0%, var(--bg-1) 50%, var(--bg-2) 100%);
  background-attachment: fixed;
}

a { color: inherit; }

/* ── Scrollbar ──────────────────────────────────────────────────────────── */
::-webkit-scrollbar       { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(148,163,184,0.2); border-radius: 99px; }
::-webkit-scrollbar-thumb:hover { background: rgba(148,163,184,0.35); }

/* ── Component Layer ────────────────────────────────────────────────────── */
@layer components {

  /* Shell */
  .app-shell   { @apply min-h-screen; }
  .content-wrap {
    @apply flex-1 overflow-y-auto overflow-x-hidden p-5 md:p-7;
  }

  /* ── Panels ── */
  .panel-glass {
    @apply rounded-xl border border-white/10 bg-[color:var(--glass)] shadow-[0_6px_32px_rgba(2,6,20,0.45)] backdrop-blur-2xl;
  }

  .panel-soft {
    @apply rounded-lg border border-white/10 bg-[color:var(--glass-soft)] backdrop-blur-md
           transition-all duration-150;
  }

  /* subtle lift on hover for interactive soft panels */
  .panel-soft-interactive {
    @apply panel-soft hover:border-white/15 hover:-translate-y-px hover:shadow-md cursor-pointer;
  }

  /* ── Inputs ── */
  .input-glass {
    @apply w-full rounded-lg border border-white/10 bg-slate-900/70
           px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500
           outline-none transition
           focus:border-indigo-400/50 focus:ring-1 focus:ring-indigo-400/20
           disabled:cursor-not-allowed disabled:opacity-50;
  }

  /* ── Buttons ── */
  .btn-primary {
    @apply inline-flex items-center gap-1.5 rounded-lg border border-indigo-400/30
           bg-gradient-to-r from-indigo-500 to-violet-500
           px-4 py-2 text-sm font-semibold text-white
           shadow-[0_0_20px_rgba(99,102,241,0.25)]
           transition duration-200
           hover:shadow-[0_0_28px_rgba(99,102,241,0.38)] hover:brightness-110
           active:scale-[0.98]
           disabled:cursor-not-allowed disabled:opacity-55;
  }

  .btn-secondary {
    @apply inline-flex items-center gap-1.5 rounded-lg border border-white/10
           bg-slate-800/70 px-4 py-2 text-sm font-medium text-slate-200
           transition duration-150
           hover:border-indigo-400/30 hover:bg-slate-700/70
           active:scale-[0.98];
  }

  .btn-ghost {
    @apply inline-flex items-center gap-1 rounded-md px-2 py-1 text-xs
           text-slate-400 transition hover:text-slate-200 hover:bg-slate-800/60
           active:scale-[0.97];
  }

  .btn-danger {
    @apply inline-flex items-center rounded-lg border border-rose-400/35
           bg-rose-500/15 px-3 py-1.5 text-xs font-semibold text-rose-200
           transition hover:bg-rose-500/30 active:scale-[0.97];
  }

  /* ── Nav ── */
  .nav-link {
    @apply relative overflow-hidden;
  }

  /* ── Page structure ── */
  .page-header {
    @apply mb-5 flex flex-wrap items-end justify-between gap-3;
  }

  .page-title {
    @apply m-0 text-xl font-bold tracking-tight text-slate-100;
  }

  .page-subtitle {
    @apply m-0 text-xs text-[color:var(--text-muted)];
  }

  /* ── Badges ── */
  .badge {
    @apply inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-semibold;
  }
  .badge-alex  { @apply border-amber-400/35  bg-amber-500/15  text-amber-200;  }
  .badge-sam   { @apply border-cyan-400/35   bg-cyan-500/15   text-cyan-200;   }
  .badge-me    { @apply border-indigo-400/35 bg-indigo-500/15 text-indigo-200; }
  .badge-lyra  { @apply border-violet-400/35 bg-violet-500/15 text-violet-200; }
  .badge-nova  { @apply border-rose-400/35   bg-rose-500/15   text-rose-200;   }
  .badge-legacy{ @apply border-slate-400/25  bg-slate-700/40  text-slate-400;  }

  /* ── Sections ── */
  .section-label {
    @apply text-[10px] font-bold uppercase tracking-widest text-slate-500;
  }

  /* ── Loading shimmer ── */
  @keyframes shimmer {
    0%   { background-position: -200% 0; }
    100% { background-position:  200% 0; }
  }
  .animate-shimmer {
    background: linear-gradient(
      90deg,
      rgba(255,255,255,0)    0%,
      rgba(255,255,255,0.06) 50%,
      rgba(255,255,255,0)    100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.8s infinite;
  }

  /* ── Status pulse ── */
  @keyframes statusPulse {
    0%, 100% { opacity: 1;   }
    50%      { opacity: 0.45; }
  }
  .status-pulse { animation: statusPulse 2.5s ease-in-out infinite; }

  /* ── Page enter ── */
  @keyframes pageEnter {
    from { opacity: 0; transform: translateY(6px); }
    to   { opacity: 1; transform: translateY(0);   }
  }
  .page-enter { animation: pageEnter 0.22s ease-out; }

  /* ── Focus states ── */
  a:focus-visible, button:focus-visible {
    @apply outline-none ring-2 ring-indigo-400/55 ring-offset-1 ring-offset-slate-950;
  }
  input:focus-visible, textarea:focus-visible, select:focus-visible {
    @apply outline-none ring-2 ring-indigo-400/35 ring-offset-1 ring-offset-slate-950;
  }

  /* ── Table defaults ── */
  table { @apply w-full border-collapse; }
  th { @apply text-left text-[10px] uppercase tracking-wider text-slate-500 font-semibold pb-1; }
  td { @apply border-t border-white/10 py-2.5 text-sm; }
}

/* ── Sidebar ── */
.sidebar { width: 220px; }

/* ── Responsive ── */
@media (max-width: 768px) {
  .sidebar {
    width: 64px !important;
  }
  .sidebar-label,
  .sidebar-title,
  .sidebar-subtitle,
  .sidebar-title-wrap {
    display: none !important;
  }
  .content-wrap { padding: 0.875rem !important; }
}

@media (max-width: 480px) {
  .sidebar {
    width: 52px !important;
    min-width: 52px !important;
    padding-inline: 0.25rem !important;
  }
  .app-shell  { overflow-x: hidden; }
  .content-wrap {
    padding: 0.625rem !important;
    overflow-x: hidden;
  }
  .panel-soft,
  .panel-glass { max-width: 100%; overflow-x: hidden; word-wrap: break-word; }
  .input-glass  { font-size: 16px !important; }
  .page-title   { font-size: 1.125rem !important; }
}

@media (max-width: 375px) {
  .sidebar {
    width: 48px !important;
    min-width: 48px !important;
  }
}

@media (max-width: 920px) {
  .kanban-grid   { grid-template-columns: 1fr !important; }
  .task-form-row { flex-direction: column !important; align-items: stretch !important; }
}

@media (min-width: 481px) and (max-width: 1024px) {
  .kanban-grid { grid-template-columns: repeat(2, 1fr) !important; }
}

/* Prevent horizontal scroll site-wide */
.content-wrap { overflow-x: hidden; }
