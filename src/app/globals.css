@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --bg-0: #060b19;
  --bg-1: #0b1222;
  --bg-2: #111a2f;
  --text-main: #e7edff;
  --text-muted: #98a4c6;
  --line: rgba(173, 190, 255, 0.2);
  --glass: rgba(13, 19, 36, 0.72);
  --glass-soft: rgba(15, 23, 43, 0.58);
  --alex-start: #6d5bff;
  --alex-end: #8a4dff;
  --sam-start: #12cfd0;
  --sam-end: #0ea5c6;
}

* {
  box-sizing: border-box;
}

html,
body {
  min-height: 100%;
}

body {
  margin: 0;
  color: var(--text-main);
  font-family: "Sora", "Manrope", "Avenir Next", "Segoe UI", sans-serif;
  background:
    radial-gradient(circle at 8% -10%, rgba(109, 91, 255, 0.22), transparent 40%),
    radial-gradient(circle at 92% 0%, rgba(18, 207, 208, 0.2), transparent 36%),
    linear-gradient(165deg, var(--bg-0) 0%, var(--bg-1) 45%, var(--bg-2) 100%);
}

a {
  color: inherit;
}

@layer components {
  .app-shell {
    @apply min-h-screen;
  }

  .content-wrap {
    @apply flex-1 overflow-y-auto p-6 md:p-8;
  }

  .page-header {
    @apply mb-7 flex flex-wrap items-end justify-between gap-4;
  }

  .page-title {
    @apply m-0 text-2xl font-semibold tracking-tight text-slate-100 md:text-3xl;
  }

  .page-subtitle {
    @apply m-0 text-sm text-[color:var(--text-muted)];
  }

  .panel-glass {
    @apply rounded-2xl border border-white/10 bg-[color:var(--glass)] shadow-[0_10px_40px_rgba(4,10,30,0.35)] backdrop-blur-xl;
  }

  .panel-soft {
    @apply rounded-xl border border-white/10 bg-[color:var(--glass-soft)] backdrop-blur-md;
  }

  .input-glass {
    @apply w-full rounded-xl border border-white/15 bg-slate-900/60 px-3.5 py-2.5 text-sm text-slate-100 outline-none transition focus:border-indigo-300/55 focus:ring-2 focus:ring-indigo-400/25;
  }

  .btn-primary {
    @apply rounded-xl border border-indigo-300/30 bg-gradient-to-r from-indigo-500 to-violet-500 px-4 py-2 text-sm font-semibold text-white shadow-[0_0_24px_rgba(109,91,255,0.25)] transition duration-200 hover:scale-[1.01] hover:shadow-[0_0_30px_rgba(109,91,255,0.38)] disabled:cursor-not-allowed disabled:opacity-60;
  }

  .btn-secondary {
    @apply rounded-xl border border-white/15 bg-slate-800/75 px-4 py-2 text-sm font-medium text-slate-200 transition hover:border-indigo-300/40 hover:bg-slate-700/80;
  }

  .btn-danger {
    @apply rounded-xl border border-rose-400/40 bg-rose-500/20 px-3 py-1.5 text-xs font-semibold text-rose-200 transition hover:bg-rose-500/35;
  }

  .nav-link {
    @apply flex items-center gap-3 rounded-xl border border-transparent px-3 py-2.5 text-sm font-medium text-slate-300 transition-all duration-200;
  }

  .nav-link:hover {
    @apply border-white/15 bg-slate-800/55 text-slate-100;
  }

  .nav-link:hover .sidebar-label {
    @apply text-slate-100;
  }

  .nav-link-active {
    @apply border-indigo-300/40 bg-indigo-500/20 text-indigo-100 shadow-[0_0_24px_rgba(109,91,255,0.25)];
  }

  .nav-link-active:hover {
    @apply bg-indigo-500/30 border-indigo-300/50;
  }

  .badge {
    @apply inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold;
  }

  .badge-alex {
    @apply border-violet-300/45 bg-violet-500/20 text-violet-200;
  }

  .badge-sam {
    @apply border-cyan-300/45 bg-cyan-500/20 text-cyan-200;
  }

  .badge-me {
    @apply border-indigo-300/45 bg-indigo-500/20 text-indigo-200;
  }

  .badge-lyra {
    @apply border-emerald-300/45 bg-emerald-500/20 text-emerald-200;
  }

  .badge-nova {
    @apply border-violet-300/45 bg-violet-500/20 text-violet-200;
  }

  .badge-legacy {
    @apply border-slate-300/30 bg-slate-600/30 text-slate-300;
  }

  /* Enhanced focus states for accessibility */
  a:focus-visible,
  button:focus-visible {
    @apply outline-none ring-2 ring-indigo-400/60 ring-offset-2 ring-offset-slate-900;
  }

  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    @apply outline-none ring-2 ring-indigo-400/40 ring-offset-2 ring-offset-slate-900;
  }

  /* Subtle hover lift for panels */
  .panel-soft {
    @apply transition-all duration-200;
  }

  .panel-soft:hover {
    @apply border-white/20 -translate-y-0.5 shadow-lg;
  }

  /* Enhanced button hover effects */
  .btn-primary {
    @apply relative overflow-hidden;
  }

  .btn-primary::after {
    content: '';
    @apply absolute inset-0 bg-white/10 opacity-0 transition-opacity duration-200;
  }

  .btn-primary:hover::after {
    @apply opacity-100;
  }

  /* Navigation link improvements */
  .nav-link {
    @apply relative overflow-hidden;
  }

  .nav-link::before {
    content: '';
    @apply absolute inset-0 bg-white/5 opacity-0 transition-opacity duration-200;
  }

  .nav-link:hover::before {
    @apply opacity-100;
  }

  /* Loading shimmer animation */
  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  .animate-shimmer {
    background: linear-gradient(90deg, 
      rgba(255,255,255,0) 0%, 
      rgba(255,255,255,0.08) 50%, 
      rgba(255,255,255,0) 100%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  /* Better table styling */
  table {
    @apply w-full border-collapse;
  }

  th {
    @apply text-left text-xs uppercase tracking-wider text-slate-400 font-medium;
  }

  td {
    @apply border-t border-white/10 py-3;
  }

  /* Enhanced badges with subtle glow */
  .badge {
    @apply shadow-sm;
  }

  /* Status indicator pulse */
  @keyframes statusPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  .status-pulse {
    animation: statusPulse 2s ease-in-out infinite;
  }

  /* Smooth page transitions */
  .page-enter {
    animation: pageEnter 0.2s ease-out;
  }

  @keyframes pageEnter {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Enhanced scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-slate-900/50;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-slate-700 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-slate-600;
  }
}

.sidebar {
  width: 240px;
}

@media (max-width: 768px) {
  .sidebar {
    width: 74px !important;
  }

  .sidebar-label,
  .sidebar-title,
  .sidebar-subtitle {
    display: none !important;
  }

  .content-wrap {
    padding: 1rem !important;
  }
}

/* Mobile overflow hardening - dedicated 375px breakpoint for small phones (iPhone SE/12/13/14 standard) */
@media (max-width: 375px) {
  .app-shell {
    overflow-x: hidden !important;
  }

  .sidebar {
    width: 52px !important;
    min-width: 52px !important;
    padding: 0.5rem 0.25rem !important;
  }

  .nav-link {
    padding: 0.375rem !important;
    gap: 0 !important;
  }

  .nav-link span:first-child {
    font-size: 1.25rem !important;
  }

  .content-wrap {
    padding: 0.5rem !important;
    overflow-x: hidden !important;
  }

  .panel-soft {
    overflow: hidden !important;
    word-wrap: break-word !important;
    max-width: 100% !important;
  }

  .input-glass {
    font-size: 16px !important;
    padding: 0.5rem !important;
  }

  .page-title {
    font-size: 1.125rem !important;
  }

  .page-header {
    gap: 0.5rem !important;
  }

  main > * {
    overflow-x: hidden !important;
    max-width: 100vw !important;
  }
}

/* Mobile overflow hardening - 480px breakpoint for larger phones and small tablets */
@media (max-width: 480px) {
  .app-shell {
    overflow-x: hidden;
  }

  .sidebar {
    width: 60px !important;
    min-width: 60px !important;
    padding-left: 0.5rem !important;
    padding-right: 0.5rem !important;
  }

  .nav-link {
    padding: 0.5rem !important;
    justify-content: center;
  }

  .content-wrap {
    padding: 0.75rem !important;
    overflow-x: hidden;
  }

  /* Ensure task cards don't overflow */
  .panel-soft {
    overflow: hidden;
    word-wrap: break-word;
  }

  /* Mobile-friendly form inputs */
  .input-glass {
    font-size: 16px !important; /* Prevent iOS zoom on focus */
  }

  /* Prevent overflow in all main content areas */
  main > * {
    overflow-x: hidden;
    max-width: 100vw;
  }
}

@media (max-width: 920px) {
  .kanban-grid {
    grid-template-columns: 1fr !important;
  }

  .task-form-row {
    flex-direction: column !important;
    align-items: stretch !important;
  }

  .office-desks {
    flex-direction: column !important;
    align-items: center !important;
  }
}

/* Tablet responsiveness - 2 columns on medium screens */
@media (min-width: 481px) and (max-width: 1024px) {
  .kanban-grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

/* Tablet (768px) specific overflow fixes */
@media (min-width: 376px) and (max-width: 768px) {
  .content-wrap {
    padding: 1rem !important;
    overflow-x: hidden !important;
  }

  .panel-soft {
    max-width: 100% !important;
    overflow-x: hidden !important;
  }

  .page-title {
    font-size: 1.375rem !important;
  }
}

/* Ensure proper overflow handling on all content areas */
.content-wrap {
  overflow-x: hidden;
}

/* Mobile-safe page container */
@media (max-width: 480px) {
  .page-header {
    flex-direction: column;
    align-items: flex-start !important;
  }

  .page-title {
    font-size: 1.25rem !important;
  }
}
